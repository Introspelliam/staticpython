<html><head>
<title>StaticPython: statically linked Python 2.x, 3.x and Stackless for 32-bit Linux, Mac OS X and FreeBSD</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
</head><body>
<h1><a name="What_is_StaticPython_?"></a>What is StaticPython?<a href="#What_is_StaticPython_?" class="section_anchor"></a></h1>
<p>StaticPython is a statically linked version of the Python 2.x (currently 2.7.1) and 3.x (currently 3.2) and Stackless Python interpreters and their standard modules for 32-bit (i686, i386, x86) Linux, Mac OS X and FreeBSD systems. It is distributed as single, statically linked 32-bit executable binaries, which contains the Python scripting engine, the interactive interpreter with command editing (readline), the Python debugger (pdb), most standard Python modules (including pure Python modules and C extensions), coroutine support using greenlet and multithreading support. The binary contains both the pure Python modules and the C extensions, so no additional <tt>.py</tt> or <tt>.so</tt> files are needed to run it. It also works in a chroot environment. The binary uses uClibc, so it supports username lookups and DNS lookups as well (without NSS).</p>
<p>StaticPython is similar to <a href="http://pypi.python.org/pypi/egenix-pyrun">PyRun</a>, except that StaticPython doesn't let you compile C extensions, and PyRun needs several libraries (e.g. glibc, OpenSSL, zlib, SQLite, bzip2) installed on the host, and StaticPython doesn't need anything (it runs even if it's the only file on the filesystem). Another important difference is that PyRun integrates nicely with packaging (setuptools, pip etc.), and is a nice, self-contained replacement for virtualenv. StaticPython doesn't help you with packaging, you have to do Python library installation and distribution manually. See this <a href="http://ptspts.blogspot.com/2014/06/whats-difference-between-staticpython.html">blog post</a> for a more detailed comparison</p>
<p>StaticPython is similar to <a href="http://www.portablepython.com/">Portable Python</a>, except that StaticPython runs on Linux instead of Windows, and it has Stackless Python, greenlet and coroutine-based I/O library support.</p>
<p>StaticPython is similar to <a href="http://micropython.org">MicroPython</a>
   in the sense that both of them can be compiled to a single-file statically
   linked binary executable on Linux i386. MicroPython supports many more
   architectures (including microcontrollers), and it's a complete
   reimplementation of the Python 3.4 language, without reusing code from the
   CPython interpreter. (Static Python uses CPython.) The binary size of
   MicroPython is about 17.56 times smaller than StaticPython See this
   <a href="http://ptspts.blogspot.com/2016/02/micropython-for-linux-i386-statically.html">blog post</a> about a file size comparison.
   </p>
<p>StaticPython is a bit similar to <a href="http://pypi.python.org/pypi/bbfreeze">bbfreeze</a> and <a href="http://www.pyinstaller.org">PyInstaller</a>, but StaticPython contains the Python interpreter, all the <tt>.py</tt> library files and all the built-in C extensions in a single executable file (while bbfreeze generates a separate <tt>.so</tt> file for each C extension library), and it doesn't contain any application-specific <tt>.py</tt> or <tt>.pyc</tt> files.</p>
<p>Here is how to use StaticPython:</p><pre class="prettyprint"><span class="pln">$ curl https://raw.githubusercontent.com/pts/staticpython/master/d.sh | bash /dev/stdin python2.7-static</span><span class="pln"><br>$ </span><span class="pun">./</span><span class="pln">python2</span><span class="pun">.</span><span class="lit">7</span><span class="pun">-</span><span class="kwd">static</span><span class="pln"><br></span><span class="typ">Python</span><span class="pln"> </span><span class="lit">2.7</span><span class="pln"> </span><span class="pun">(</span><span class="pln">r27</span><span class="pun">:</span><span class="lit">82500</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">11</span><span class="pln"> </span><span class="lit">2010</span><span class="pun">,</span><span class="pln"> </span><span class="lit">10</span><span class="pun">:</span><span class="lit">51</span><span class="pun">:</span><span class="lit">33</span><span class="pun">)</span><span class="pln"> <br></span><span class="pun">[</span><span class="pln">GCC </span><span class="lit">4.1</span><span class="pun">.</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> on linux2<br></span><span class="typ">Type</span><span class="pln"> </span><span class="str">"help"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"copyright"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"credits"</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="str">"license"</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> more information</span><span class="pun">.</span><span class="pln"><br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span></pre>
<p>Here is how to use the Stackless version:</p><pre class="prettyprint"><span class="pln">$ curl https://raw.githubusercontent.com/pts/staticpython/master/d.sh | bash /dev/stdin stackless2.7-static</span><span class="pln"><br>$ </span><span class="pun">./</span><span class="pln">stackless2</span><span class="pun">.</span><span class="lit">7</span><span class="pun">-</span><span class="kwd">static</span><span class="pln"><br></span><span class="typ">Python</span><span class="pln"> </span><span class="lit">2.7</span><span class="pln"> </span><span class="typ">Stackless</span><span class="pln"> </span><span class="lit">3.1b3</span><span class="pln"> </span><span class="lit">060516</span><span class="pln"> </span><span class="pun">(</span><span class="pln">release27</span><span class="pun">-</span><span class="pln">maint</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Aug</span><span class="pln"> </span><span class="lit">11</span><span class="pln"> </span><span class="lit">2010</span><span class="pun">,</span><span class="pln"> </span><span class="lit">13</span><span class="pun">:</span><span class="lit">55</span><span class="pun">:</span><span class="lit">35</span><span class="pun">)</span><span class="pln"> <br></span><span class="pun">[</span><span class="pln">GCC </span><span class="lit">4.1</span><span class="pun">.</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> on linux2<br></span><span class="typ">Type</span><span class="pln"> </span><span class="str">"help"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"copyright"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"credits"</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="str">"license"</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> more information</span><span class="pun">.</span><span class="pln"><br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">import</span><span class="pln"> stackless<br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span></pre>
<p>Here is how to use the stacklessco version, with Syncless:</p><pre class="prettyprint"><span class="pln">$ curl https://raw.githubusercontent.com/pts/staticpython/master/d.sh | bash /dev/stdin stacklessco2.7-static</span><span class="pln"><br>$ </span><span class="pun">./</span><span class="pln">stacklessco2</span><span class="pun">.</span><span class="lit">7</span><span class="pun">-</span><span class="kwd">static</span><span class="pln"><br></span><span class="typ">Python</span><span class="pln"> </span><span class="lit">2.7</span><span class="pun">.</span><span class="lit">1</span><span class="pln"> </span><span class="typ">Stackless</span><span class="pln"> </span><span class="lit">3.1b3</span><span class="pln"> </span><span class="lit">060516</span><span class="pln"> </span><span class="pun">(</span><span class="pln">release27</span><span class="pun">-</span><span class="pln">maint</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Feb</span><span class="pln"> &nbsp;</span><span class="lit">1</span><span class="pln"> </span><span class="lit">2011</span><span class="pun">,</span><span class="pln"> </span><span class="lit">16</span><span class="pun">:</span><span class="lit">57</span><span class="pun">:</span><span class="lit">16</span><span class="pun">)</span><span class="pln"> <br></span><span class="pun">[</span><span class="pln">GCC </span><span class="lit">4.1</span><span class="pun">.</span><span class="lit">2</span><span class="pun">]</span><span class="pln"> on linux2<br></span><span class="typ">Type</span><span class="pln"> </span><span class="str">"help"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"copyright"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"credits"</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="str">"license"</span><span class="pln"> </span><span class="kwd">for</span><span class="pln"> more information</span><span class="pun">.</span><span class="pln"><br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> syncless </span><span class="kwd">import</span><span class="pln"> coio<br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> coio</span><span class="pun">.</span><span class="pln">sleep</span><span class="pun">(</span><span class="lit">1.5</span><span class="pun">)</span><span class="pln"><br></span><span class="pun">(</span><span class="pln">sleeping </span><span class="kwd">for</span><span class="pln"> </span><span class="lit">1.5</span><span class="pln"> second</span><span class="pun">)</span><span class="pln"><br></span><span class="pun">&lt;</span><span class="kwd">object</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> at </span><span class="lit">0xf7709490</span><span class="pun">&gt;</span><span class="pln"><br></span><span class="pun">&gt;&gt;&gt;</span><span class="pln"> </span></pre>
<h1><a name="Download_for_Linux"></a>Download for Linux<a href="#Download_for_Linux" class="section_anchor"></a></h1>
<p>The latest release can be downloaded here (pick the one which best suits your needs):</p>
<ul>
<li><a href="https://raw.githubusercontent.com/pts/staticpython/master/release/python2.7-static">python2.7</a>: the StaticPython 2.7.x normal (non-Stackless) executable binary, with greenlet</li>
<li><a href="https://raw.githubusercontent.com/pts/staticpython/master/release/stackless2.7-static">stackless2.7</a>: the StaticPython 2.7.x Stackless executable binary, with greenlet</li>
<li><a href="https://raw.githubusercontent.com/pts/staticpython/master/release/stacklessco2.7-static">stacklessco2.7</a>: the StaticPython 2.7.x Stackless + greenlet + Coroutine-based I/O + OpenSSL + Crypto executable binary</li>
<li><a href="https://raw.githubusercontent.com/pts/staticpython/master/release/python3.2-static">python3.2</a>: the StaticPython 3.2.x normal (non-Stackless) executable binary, with greenlet</li>
<li><a href="https://raw.githubusercontent.com/pts/staticpython/master/release/stackless3.2-static">stackless3.2</a>: the StaticPython 3.2.x Stackless executable binary, with greenlet</li>
<li><a href="https://raw.githubusercontent.com/pts/staticpython/master/release/stacklessxl3.2-static">stacklessxl3.2</a>: the StaticPython 3.2.x Stackless + greenlet + OpenSSL executable binary</li>
</ul>
<h1><a name="Download_for_Mac_OS_X"></a>Download for Mac OS X<a href="#Download_for_Mac_OS_X" class="section_anchor"></a></h1>
<p>These binaries have been tested on Mac OS X 10.5 and 10.6.</p>
<p>The latest release can be downloaded here (pick the one which best suits your needs):</p>
<ul>
<li><a href="https://raw.githubusercontent.com/pts/staticpython/master/release.darwin/python2.7-static">python2.7</a>: the StaticPython 2.7.x normal (non-Stackless) executable binary, with greenlet</li>
<li><a href="https://raw.githubusercontent.com/pts/staticpython/master/release.darwin/stackless2.7-static">stackless2.7</a>: the StaticPython 2.7.x Stackless executable binary, with greenlet</li>
<li><a href="https://raw.githubusercontent.com/pts/staticpython/master/release.darwin/stacklessco2.7-static">stacklessco2.7</a>: the StaticPython 2.7.x Stackless + greenlet + Coroutine-based I/O + Crypto executable binary</li>
<li><a href="https://raw.githubusercontent.com/pts/staticpython/master/release.darwin/python3.2-static">python3.2</a>: the StaticPython 3.2.x normal (non-Stackless) executable binary, with greenlet</li>
<li><a href="https://raw.githubusercontent.com/pts/staticpython/master/release.darwin/stackless3.2-static">stackless3.2</a>: the StaticPython 3.2.x Stackless executable binary, with greenlet</li>
<li><a href="https://raw.githubusercontent.com/pts/staticpython/master/release.darwin/stacklessxl3.2-static">stacklessxl3.2</a>: the StaticPython 3.2.x Stackless + greenlet + OpenSSL executable binary</li>
</ul>
<h1><a name="Download_for_FreeBSD"></a>Download for FreeBSD<a href="#Download_for_FreeBSD" class="section_anchor"></a></h1>
<p>Please use the Linux downloads above and run those binaries in <a href="http://www.freebsd.org/doc/handbook/linuxemu.html">Linux Binary Compatibility</a> mode on FreeBSD. StaticPython has been tested and found working on FreeBSD 8.1. (Maybe it works with earlier FreeBSD versions as well.)</p>
<h1><a name="Installation_for_FreeBSD"></a>Installation for FreeBSD<a href="#Installation_for_FreeBSD" class="section_anchor"></a></h1>
<p>As a preparation on FreeBSD 8.1, please run <tt>kldload linux</tt> as root to load the kernel module for Linux binary compatibility, and &amp;mdash; optionally &amp;mdash; add <tt>linux_enable="YES"</tt> to <tt>/etc/rc.conf</tt> to make this change permanent across reboots. Continue with downloading and using the Linux binaries of StaticPython.</p>
<p>See more about <a href="http://www.freebsd.org/doc/handbook/linuxemu-lbc-install.html">installing Linux Binary Compatibility</a>. Please note that it's not necessary to install any Linux runtime libraries (e.g. <strong>linux_base</strong>), since the StaticPython binaries contains all the code they need.</p>
<p>Please note that the Linux emulation in FreeBSD is incomplete, e.g. it doesn't emulate <a href="http://linux.die.net/man/4/epoll">epoll(4)</a>, so e.g. <tt>select.epoll()</tt> wouldn't work (but it would raise <i>IOError: <tt>[</tt>Errno 38<tt>]</tt> Function not implemented</i>). This doesn't cause any problems with the <i>syncless</i> or <i>gevent</i> modules in stacklessco, because they use <i>libevent2</i>, which reverts by default to <a href="http://linux.die.net/man/4/epoll">poll(2)</a> if <i>epoll(4)</i> is not available, and FreeBSD emulates <i>poll(2)</i> properly.</p>
<h1><a name="For_what_purpose_is_StaticPython_useful?"></a>For what purpose is StaticPython useful?<a href="#For_what_purpose_is_StaticPython_useful?" class="section_anchor"></a></h1>
<ul>
<li>for running Python scripts in chroot and other restricted environments (e.g. for running untrusted standard Python code)</li>
<li>for running CGI scripts on some web hosting providers where Python is not preinstalled (warning: this is slow, because StaticPython starts up relatively slowly)</li>
<li>for trying the newest Python 2.x or 3.x and running scripts on a very old Linux, FreeBSD or Mac OS X system or on a system where package installation is not possible or it is cumbersome</li>
<li>for trying the newest Stackless Python 2.x or 3.2 and running scripts on a Linux system where source installation is not possible or it is cumbersome</li>
<li>for deploying and running Syncless, gevent or Concurrence-based networking applications on a machine without a working Python installation</li>
<li>for deploying and running Tornado, Eventlet or Twisted-based networking applications on a machine without a working Python installation (please note that the I/O framework itself has also to be deployed, i.e. extracted next to your application)</li>
</ul>
<h1><a name="When_isn't_StaticPython_recommended?"></a>When isn't StaticPython recommended?<a href="#When_isn't_StaticPython_recommended?" class="section_anchor"></a></h1>
<ul>
<li>if dependencies need Python package installation (e.g. distutils, setuptools, <tt>setup.py</tt>, Pyrex, Cython) -- distutils is not included, there is no <tt>site-packages</tt> directory, loading <tt>.so</tt> files is not supported</li>
<li>if dependencies are or need shared libraries (<tt>.so</tt> files) -- StaticPython doesn't support loading <tt>.so</tt> files, not even with the <i>dl</i> or <i>ctypes</i> modules</li>
<li>if startup and module import has to be fast -- since StaticPython stores <tt>.py</tt> files (no <tt>.pyc</tt>) in a ZIP file at the end of the binary</li>
<li>for GUI programming -- no GUI or graphics library is included, loading <tt>.so</tt> files is not supported</li>
<li>if the architecture is not i386 (x86) or amd64 (x86_64)</li>
<li>if the operating system is not Linux, Mac OS X or FreeBSD</li>
</ul>
<h1><a name="How_to_extend,_customize_or_recompile_StaticPython_?"></a>How to extend, customize or recompile StaticPython?<a href="#How_to_extend,_customize_or_recompile_StaticPython_?" class="section_anchor"></a></h1>
<p>Here is how to recompile for yourself:</p><pre class="prettyprint"><span class="pln">$ cd </span><span class="pun">/</span><span class="pln">tmp<br>$ git clone --depth 1 https://github.com/pts/staticpython.git staticpython-build</span><span class="pln"><br>$ cd staticpython-build</span><span class="pun">-</span><span class="pln">build<br>$ </span><span class="pun">./</span><span class="pln">build</span><span class="pun">.</span><span class="pln">sh &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="com"># Build the non-Stackless vesion.</span><span class="pln"><br>$ </span><span class="pun">./</span><span class="pln">build</span><span class="pun">.</span><span class="pln">sh &nbsp;stackless &nbsp; &nbsp;</span><span class="com"># Build to Stackless version.</span><span class="pln"><br>$ </span><span class="pun">./</span><span class="pln">build</span><span class="pun">.</span><span class="pln">sh &nbsp;stacklessco &nbsp;</span><span class="com"># Build to Stackless + IO (stacklessco) version.</span></pre>
<p>To extend and customize StaticPython, look at the <tt>build.sh</tt> script and the files in its directory. Currently no further documentation is provided on this.</p>
<h1><a name="Feature_details"></a>Feature details<a href="#Feature_details" class="section_anchor"></a></h1>
<h2><a name="Features_provided"></a>Features provided<a href="#Features_provided" class="section_anchor"></a></h2>
<p>(Please note that the version numbers below might be lower than what's actually in the newest binary.)</p>
<ul>
<li>command-line editing with the built-in readline module</li>
<li>almost all standard Python 2.7 or 3.2 modules built-in</li>
<li>almost all standard C extensions built-in: <tt>_bisect</tt>, <tt>_codecs</tt>, <tt>_codecs_cn</tt>, <tt>_codecs_hk</tt>, <tt>_codecs_iso2022</tt>, <tt>_codecs_jp</tt>, <tt>_codecs_kr</tt>, <tt>_codecs_tw</tt>, <tt>_collections</tt>, <tt>_csv</tt>, <tt>_curses</tt>, <tt>_elementtree</tt>, <tt>_functools</tt>, <tt>_heapq</tt>, <tt>_hotshot</tt>, <tt>_io</tt>, <tt>_json</tt>, <tt>_locale</tt>, <tt>_lsprof</tt>, <tt>_md5</tt>, <tt>_multibytecodec</tt>, <tt>_multiprocessing</tt>, <tt>_random</tt>, <tt>_sha</tt>, <tt>_sha256</tt>, <tt>_sha512</tt>, <tt>_socket</tt>, <tt>_sockobject</tt>, <tt>_sqlite3</tt> (added 1004307 bytes to the executable binary size), <tt>_sre</tt>, <tt>_struct</tt>, <tt>_symtable</tt>, <tt>_weakref</tt>, <tt>array</tt>, <tt>audioop</tt>, <tt>binascii</tt>, <tt>bz2</tt>, <tt>cPickle</tt>, <tt>cStringIO</tt>, <tt>cmath</tt>, <tt>crypt</tt>, <tt>datetime</tt>, <tt>errno</tt>, <tt>fcntl</tt>, <tt>fpectl</tt>, <tt>future_builtins</tt>, <tt>gc</tt>, <tt>grp</tt>, <tt>imageop</tt>, <tt>itertools</tt>, <tt>math</tt>, <tt>mmap</tt>, <tt>operator</tt>, <tt>parser</tt>, <tt>posix</tt>, <tt>pwd</tt>, <tt>pyexpat</tt>, <tt>readline</tt>, <tt>resource</tt>, <tt>select</tt>, <tt>signal</tt>, <tt>strop</tt>, <tt>syslog</tt>, <tt>termios</tt>, <tt>thread</tt>, <tt>time</tt>, <tt>timing</tt>, <tt>zipimport</tt>, <tt>zlib</tt></li>
<li>built-in C extension <tt>spwd</tt> (for shadow password files) built in for Linux, but missing on the Mac OS X</li>
<li>greenlet integrated for coroutine support</li>
<li>the <tt>stackless2.7-static</tt> and <tt>stackless3.2-static</tt> binaries have Stackless Python (includinging the <tt>stackless</tt> module) integrated for high performance coroutine support</li>
<li>multithreading (using thread and threading as usual)</li>
<li>line editing even without a terminfo definition or inputrc file (useful in chroot, provided by libreadline/libncurses by default)</li>
<li>the usual help, license used in interactive mode</li>
<li>the <tt>stacklessco2.7-static</tt> binary (stacklessco) has the following coroutine-based I/O modules built in: gevent-0.3.12, gevent-MySQL (GIT snapshot on 20110221, works with gevent and Syncless), syncless-0.22, concurrence-0.3.1 (including the MySQL client)</li>
<li>the <tt>stacklessco2.7-static</tt> binary (stacklessco) has the following crypto modules built in: pycrypto-2.3, alo-aes-0.3</li>
<li>the <tt>stacklessco2.7-static</tt> binary (stacklessco) has OpenSSL built in (can be used with the <tt>ssl</tt> and <tt>_ssl</tt> modules)</li>
<li>the <tt>stacklessxl3.2-static</tt> binary has OpenSSL built in (can be used with the <tt>ssl</tt>, <tt>_ssl</tt> and <tt>_hashlib</tt> modules)</li>
</ul>
<h2><a name="Executable_binary_layout"></a>Executable binary layout<a href="#Executable_binary_layout" class="section_anchor"></a></h2>
<p>The following comments apply to the Linux version, but the Mac OS X version has similar properties.</p>
<ul>
<li>Python 2.7 (<tt>r27:82500</tt>) on Linux i386, statically linked</li>
<li>Stackless Python 2.7 (<tt>Stackless 3.1b3 060516 release27-maint</tt>) on Linux i386, statically linked</li>
<li>compiled and linked with uClibc, so it supports username lookups and DNS lookups as well (without NSS).</li>
<li>pure Python and C extensions integrated to a single, statically linked, i386 (i686) Linux executable</li>
<li>compiled with uClibc so it can do DNS lookups without <tt>/lib/libss_*so*</tt></li>
<li>can run from any directory, even in chroot containing only the binary, even in interactive mode, even without /proc mounted</li>
<li>it is not possible to compress the binary with UPX, because there is a .zip file in the end (which has to be moved away first)</li>
</ul>
<h2><a name="Features_missing"></a>Features missing<a href="#Features_missing" class="section_anchor"></a></h2>
<ul>
<li>missing: loading .so files (C shared libraries, Python C extensions); if you need that, try <a href="http://pypi.python.org/pypi/egenix-pyrun">PyRun</a></li>
<li>missing: the <tt>ctypes</tt> module and the <tt>dl</tt> module (since no <tt>.so</tt> file loading support)</li>
<li>missing: the <tt>distutils</tt> module, custom extension installation</li>
<li>missing: IPv6 support</li>
<li>missing: GUI bindings (tkinter, GTK, Qt etc.)</li>
<li>missing: release for Microsoft Windows</li>
<li>missing: release for non-i386, non-amd64 architectures</li>
</ul>
<h2><a name="Documentation"></a>Documentation<a href="#Documentation" class="section_anchor"></a></h2>
<ul>
<li><a href="https://rawgit.com/pts/staticpython/master/doc/slides_2011-06-23/pts_staticpython_2011-06-23.html">Precompiling and deploying Python to any Linux, FreeBSD or Mac OS X system</a> (slides on EuroPython 2011)
</li>
</ul>
</body></html>
